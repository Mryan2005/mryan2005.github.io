const RightMenuAplayer=(()=>{let e;const t={};const r={};r.checkAPlayer=()=>{if(e===undefined||t.player===undefined){r.setAPlayerObject()}else if(t.observer===undefined){r.setAPlayerObserver()}};r.setAPlayerObject=()=>{let e=document.querySelectorAll(".footer meting-js");if(e.length==0){e=document.querySelectorAll("meting-js")}t.player=undefined;e.forEach((e,a)=>{if(e.meta.id==volantis.GLOBAL_CONFIG.plugins.aplayer.id&&e.aplayer&&t.player===undefined){t.player=e.aplayer;r.setAPlayerObserver();r.updateTitle()}})};r.setAPlayerObserver=()=>{try{t.player.on("play",function(e){r.updateAPlayerControllerStatus(e);t.status="play"});t.player.on("pause",function(e){r.updateAPlayerControllerStatus(e);t.status="pause"});t.player.on("volumechange",function(e){r.onUpdateAPlayerVolume(e)});t.player.on("loadstart",function(e){r.updateTitle(e)});t.volumeBarWrap=document.getElementsByClassName("nav volume")[0].children[0];t.volumeBar=t.volumeBarWrap.children[0];const a=e=>{r.updateAPlayerVolume(e)};const l=e=>{t.volumeBarWrap.classList.remove("aplayer-volume-bar-wrap-active");document.removeEventListener("mouseup",l);document.removeEventListener("mousemove",a);r.updateAPlayerVolume(e)};t.volumeBarWrap.addEventListener("mousedown",e=>{e.stopPropagation();t.volumeBarWrap.classList.add("aplayer-volume-bar-wrap-active");document.addEventListener("mousemove",a);document.addEventListener("mouseup",l)});t.volumeBarWrap.addEventListener("click",e=>{e.stopPropagation()});r.updateAPlayerControllerStatus();r.onUpdateAPlayerVolume();t.observer=true}catch(e){console.log(e);t.observer=undefined}};r.updateAPlayerVolume=e=>{let a=((e.clientX||e.changedTouches[0].clientX)-t.volumeBar.getBoundingClientRect().left)/t.volumeBar.clientWidth;a=Math.max(a,0);a=Math.min(a,1);t.player.volume(a)};r.onUpdateAPlayerVolume=()=>{try{t.volumeBar.children[0].style.width=t.player.audio.volume*100+"%"}catch(e){console.log(e)}};r.updateAPlayerControllerStatus=()=>{try{if(t.player.audio.paused){e="pause";document.getElementsByClassName("nav toggle")[0].children[0].classList.add("fa-play");document.getElementsByClassName("nav toggle")[0].children[0].classList.remove("fa-pause")}else{e="play";document.getElementsByClassName("nav toggle")[0].children[0].classList.remove("fa-play");document.getElementsByClassName("nav toggle")[0].children[0].classList.add("fa-pause")}}catch(e){console.log(e)}};r.aplayerToggle=()=>{r.checkAPlayer();try{t.player.toggle()}catch(e){console.log(e)}};r.aplayerBackward=()=>{r.checkAPlayer();try{t.player.skipBack();t.player.play()}catch(e){console.log(e)}};r.aplayerForward=()=>{r.checkAPlayer();try{t.player.skipForward();t.player.play()}catch(e){console.log(e)}};r.aplayerVolume=e=>{r.checkAPlayer();try{t.player.volume(e)}catch(e){console.log(e)}};r.updateTitle=()=>{r.checkAPlayer();try{const e=t.player.list.index;const a=t.player.list.audios[e];document.getElementsByClassName("nav music-title")[0].innerHTML=a.title}catch(e){}};return{checkAPlayer:r.checkAPlayer,aplayerBackward:r.aplayerBackward,aplayerToggle:r.aplayerToggle,aplayerForward:r.aplayerForward,APlayer:t}})();Object.freeze(RightMenuAplayer);volantis.requestAnimationFrame(()=>{RightMenuAplayer.checkAPlayer()});